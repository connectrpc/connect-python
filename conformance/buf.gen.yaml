version: v2
inputs:
  - module: buf.build/connectrpc/conformance:v1.0.4
plugins:
  # NOTE: v26.0 is the earliest version supporting protobuf==5.
  - remote: buf.build/protocolbuffers/python:v26.0
    out: test/gen
  - remote: buf.build/protocolbuffers/pyi:v26.0
    out: test/gen
  - local:
      - go
      - run
      - -C
      - ../protoc-gen-connect-python
      - .
    out: test/gen
    opt:
      - imports=relative
